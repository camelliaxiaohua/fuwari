---
title: ANY、SOME、ALL 操作符
category: MySQL
tags:
  - MySQL原理
  - DQL
published: 2022-03-12
updated: 2022-03-12
draft: false
---
---

在 SQL 查询中，`ANY`、`SOME`、`ALL` 是用于**多值比较**的操作符。  
它们通常与子查询配合使用，用来判断某个值是否**满足子查询结果集中的任意一个**或**所有值**。

> [!NOTE] 
> - `ANY` / `SOME`：只要有一个匹配就成立。
> - `ALL`：必须全部满足条件才成立。

### 1. ANY 与 SOME

`ANY` 与 `SOME` 在 SQL 中完全等价，可以互换。  
它们用于将一个值与子查询返回的**多个值**逐一比较，只要其中**有一个结果满足条件**，表达式就为真（TRUE）。

- **语法：**

```sql
表达式 运算符 ANY (子查询)
-- 或
表达式 运算符 SOME (子查询)
```

> 常见运算符：`=`, `<>`, `>`, `<`, `>=`, `<=`

- **示例:**

```sql
SELECT name, salary
FROM emp
WHERE salary > ANY (
    SELECT salary FROM emp WHERE dept = '销售部'
);
```

**含义**：只要当前员工工资 **大于销售部中任意一个人** 的工资，就符合条件。换句话说，只要工资高于销售部中**最低工资**即可。

> 可等价理解为：  
> `salary > (销售部最低工资)`

### 2. ALL（全部满足）

`ALL` 用于判断一个值是否与子查询返回的**所有值都满足条件**。只有当每一次比较都成立时，整个表达式才为真（TRUE）。

- **语法：**

```sql
表达式 运算符 ALL (子查询)
```

- **示例：**

```sql
SELECT name, salary
FROM emp
WHERE salary > ALL (
    SELECT salary FROM emp WHERE dept = '销售部'
);
```

**含义：** 当前员工工资必须 **高于销售部中所有人** 的工资，也就是高于销售部中**最高工资**。

> 等价于：
> ```sql
> salary > (SELECT MAX(salary) FROM emp WHERE dept = '销售部');
> ```

### 3. 使用注意事项

- `ANY` 与 `SOME` 等价，任选其一即可；
- 子查询必须返回**单列结果**；
- 若子查询结果为空，则 `ALL` 始终为真，`ANY` 始终为假；
- 当使用 `=` 搭配 `ANY` 时，与 `IN` 等价：
  
```sql
-- 以下两者等价
salary = ANY (SELECT salary FROM emp WHERE dept = '销售部');
salary IN (SELECT salary FROM emp WHERE dept = '销售部');
```
