---
title: 1. 初识Docker容器
category: docker
tags:
  - docker教程
published: 2024-11-19
updated: 2024-11-19
draft: false
---
---
## 1. 什么是Docker

Docker 是一个开源容器化平台，用于自动部署和管理应用程序。它通过将应用及其依赖项打包成轻量级、可移植的容器，解决了传统虚拟化的性能问题。Docker 容器能够在任何支持 Docker 的环境中运行，包括本地开发、测试服务器或生产环境，并且**可以轻松地从一个环境迁移到另一个，实现跨平台部署和扩展**。

### 1.1. 常规部署的问题

大型项目通常包含许多组件，并且运行环境相对复杂。例如：

- 配置在开发、测试和生产环境之间的差异可能会使应用程序在某些环境中运行正常，在其他环境中则出现故障。
	
- 应用程序所依赖的库、框架和数据库等需要进行手动安装和配置，这使得管理和维护不同版本的依赖项变得更加复杂。

<img src="https://camelliaxiaohua-1313958787.cos.ap-shanghai.myqcloud.com/markdown/20260210112912.png" alt="docker1" style="zoom: 25%;" />

在某些项目部署过程中，需要依赖于node.js、Redis、RabbitMQ、MySQL等服务，这些服务所需的函数库和依赖项各有不同，有时甚至存在冲突，这极大增加了部署的难度。

### 1.2. Docker如何解决依赖兼容问题

- **打包应用及其依赖**：将应用的库（Libs）、依赖（Deps）和配置文件与应用一起打包到容器镜像中，确保应用运行所需的一切都包含在内。
- **容器隔离运行**：每个应用运行在独立的容器中，隔离它们的运行环境，避免不同应用之间的依赖冲突和互相干扰。

<img src="https://camelliaxiaohua-1313958787.cos.ap-shanghai.myqcloud.com/markdown/fbf7d149-7e0a-4c02-aff1-2dc6857b4a1a.png" style="zoom: 25%;" />

这样打包好的应用包中，既包含应用本身，也保护应用所需要的Libs、Deps，无需再操作系统上安装这些，自然就不存在不同应用之间的兼容问题了。

虽然解决了不同应用的兼容问题，但是开发、测试等环境会存在差异，操作系统版本也会有差异，怎么解决这些问题呢？

## 2. Docker如何解决操作系统环境差异

### 2.1. 操作系统结构

要解决不同操作系统环境差异问题，必须先了解操作系统结构。以一个Ubuntu操作系统为例，结构如下：

<img src="https://camelliaxiaohua-1313958787.cos.ap-shanghai.myqcloud.com/markdown/8fb5712e-a746-4c0a-92aa-c3734493fe0d.png" style="zoom: 25%;" />

**结构包括：**

- 计算机硬件：例如CPU、内存、磁盘等。
- 系统内核：所有Linux发行版的内核都是Linux，例如CentOS、Ubuntu、Fedora等。内核可以与计算机硬件交互，对外提供**内核指令**，用于操作计算机硬件。
- 系统应用：操作系统本身提供的应用、函数库。这些函数库是对内核指令的封装，使用更加方便。

**计算机交互的流程：**

1. 应用调用操作系统应用（函数库），实现各种功能。
2. 系统函数库是对内核指令集的封装，会调用内核指令。
3. 内核指令操作计算机硬件。

**Ubuntu和CentOS等都是基于Linux内核，只是系统应用不同，所提供的函数库有差异。**

<img src="https://camelliaxiaohua-1313958787.cos.ap-shanghai.myqcloud.com/markdown/2a13e928-8d8d-4b93-9269-953447ccfcd1.png" style="zoom: 25%;" />

此时，若将一个Ubuntu版本的MySQL应用安装到CentOS系统，MySQL在调用Ubuntu函数库时，会发现找不到或者不匹配。

<img src="https://camelliaxiaohua-1313958787.cos.ap-shanghai.myqcloud.com/markdown/abace2ab-68b5-40af-97b8-d9c279bfb0ed.png" style="zoom: 25%;" />

### 2.2. Docker解决不同系统环境的问题

Docker 将用户程序与其**所需的系统库**（如 Ubuntu 的函数库）**一起打包**进镜像，确保运行时环境一致。

当 Docker 在不同操作系统上运行时，它直接使用**打包**好的**系统函数库**，借助操作系统的 **Linux 内核**（Docker 依赖 Linux 内核特性）来运行容器中的应用程序。

这样，即使底层操作系统不同，Docker 仍能确保应用程序在一致的环境下运行，解决了环境差异带来的兼容性问题。

<img src="https://camelliaxiaohua-1313958787.cos.ap-shanghai.myqcloud.com/markdown/c58120bf-17c7-4d15-895f-ccb7c3f6eabe.png" style="zoom: 25%;" />

## 3. 总结  

### 3.1. Docker解决项目依赖兼容性问题

- Docker允许在开发中将应用、依赖、函数库、配置等**打包**在一起，形成一个可移植的镜像，确保应用及其所需的环境一致。
- Docker应用运行在**容器**中，利用沙箱机制，实现相互**隔离**，避免不同组件之间的依赖冲突。

### 3.2. Docker解决开发、测试、生产环境差异问题

- Docker镜像包含完整的运行环境，包括操作系统的函数库和应用依赖，仅依赖宿主系统的Linux内核，因此可以在任意Linux操作系统上**一致运行**。
- 无论开发、测试还是生产环境，只要使用相同的镜像，就能保证运行环境的一致性，避免因环境差异导致的问题。

### 3.3.  Docker的优势总结

- **可移植性**：将程序及其依赖、运行环境一起打包为镜像，可轻松迁移至任何支持Docker的Linux操作系统。
- **隔离性**：容器利用沙箱机制实现应用间的隔离，确保各个应用**互不干扰**。
- **快捷性**：启动、停止、移除应用都可通过一行命令完成，提升了部署和管理的**便捷性**。

